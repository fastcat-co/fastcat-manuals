검색엔진 통합매뉴얼
==============

시스템개요
-------

### 개요

#### 분산병렬처리
Fastcatsearch는 대용량문서를 빠른 시간안에 색인 및 검색이 가능하도록 설계된 분산검색엔진입니다. 병렬처리의 장점을 활용하여 검색시 여러 서버에 분산되어 있는 색인문서를 병렬로 동시에 검색하여 브로커서버에서 중간결과들을 합쳐서 최종검색결과를 만들어 냅니다. 또한 색인시에도 하나의 컬렉션을 내부적으로 분할하여 색인함으로써 길어질 수 있는 전체색인시간을 현저히 줄여줍니다.

#### 한국어분석기
자연어처리모듈이 탑재된 한국어분석기를 제공하며, 키워드 검색의 대상이 되는 명사뿐만이 아니라, 조사, 어미등에 대해서도 단어를 추출함으로써 단순 키워드검색뿐만이 아니라, 문장검색과 인접검색 기능을 제공합니다. 한국어분석기에 사용되는 기초사전 및 확률사전은 국립국어원 세종말뭉치를 기반으로 추출하였으며, 실무에서 자주 사용되는 신조어와 외래어등이 추가 보강되어 95%이상의 분석품질을 제공하고 있습니다. 또한 한국어기반 검색에서 매우 중요한 두단어 이상이 결합된 복합명사에 대해서도 정교하게 분리해내어 운영자의 추가 관리부담없이도 최상의 검색결과를 기대할 수 있습니다.

#### 사전
기초사전 이외에 신조어추가에 사용되는 사용자사전과, 검색어 확장에 사용되는 유사어사전, 그리고 광고성키워드나 성인키워드등의 제거에 사용되는 불용어사전을 기본적으로 제공합니다. 운영자는 원하는 시간이면 언제든지 사전을  편집하고 적용할수 있으며, 즉시 검색결과에 반영됩니다. 또한 사전통합검색기능도 제공하여, 특정 단어가 어떤 사전에 존재하여 검색결과에 영향을 미치는지 신속히 판단할 수 있습니다. 그리고, 운영자가 커스텀 사전을 무제한으로 생성하여 사용할수 있는 확장성도 제공합니다.

#### 웹관리도구
검색엔진의 관련된 모든 관리작업을 웹브라우저를 통해서 수행이 가능합니다. 사전관리, 컬렉션관리, 색인관리, 분석기관리, 서버관리, 로그관리, 검색테스트, 전체현황 대시보드등을 웹을 통해 관리할 수 있습니다. 관리도구는 운영자별로 계정을 만들어 사용할 수 있으며, 각각 계정에 서로 다른 권한을 부여할 수 있어, 안전하게 권한을 분담하여 검색엔진을 관리할 수 있습니다.

#### 검색클라이언트
검색엔진과의 통신은 HTTP기반의 REST방식으로 이루어집니다. 검색쿼리는 문자열로 구성되어 있으며, 검색결과도 JSON이나 XML형태로 제공됩니다. 별도로 제공되는 검색클라이언트는 없으며, 각 언어에서 제공하는 HTTP 클라이언트 라이브러리를 사용하여 검색요청을 하게 됩니다.

### 노드구성
표1. 노드타입

|타입 |설명 |
|:----:|:----:|
|마스터노드|관리도구와 통신.<br>컬렉션관리, 스케쥴관리, 분석기관리 등을 담당.|
|색인노드 |문서색인을 담당.<br>색인후 데이터노드에 색인데이터 전파.|
|검색노드 |검색요청을 받아들이며, 로드밸런싱도 함께 담당.<br>실제 색인데이터는 가지고 있지 않으며, 데이터노드로 검색 재요청 (로드밸런싱).<br>분산검색의 경우 여러 데이터노드의 중간검색결과를 머징하는 브로커 역할 담당.|
|데이터노드 | 실제 색인데이터 존재.<br>색인노드에서 생성된 색인데이터가 데이터노드로 전송.<br>하나의 컬렉션이 여러 데이터노드에 설정시, 부하분산 및 Failover가능.|

#### 단일서버구성
문서량이 작을 경우에는 색인노드,검색노드,데이터노드를 동일한 단일서버에 구성할 수 있다.

![](https://raw.githubusercontent.com/fastcat-co/fastcat-manuals/master/fastcatsearch/main-manual/img/325.jpg)

#### 분산서버구성

##### 장애대비 이중화 구성
2대 이상의 데이터노드를 구성시 1대 서버장애시 나머지 서버로 검색서비스가 가능하다.
![](https://raw.githubusercontent.com/fastcat-co/fastcat-manuals/master/fastcatsearch/main-manual/img/327.jpg)

##### 데이터파티셔닝 구성
문서량이 많아서 2대 이상의 서버에 문서를 나누어 색인후 검색시 병합하여 검색한다.
![](https://raw.githubusercontent.com/fastcat-co/fastcat-manuals/master/fastcatsearch/main-manual/img/326.jpg)

##### 복합부하분산구성
장애대비 이중화 + 부하분산 + 데이터파티셔닝을 모두 포함한 구성이다.
예시에서는 검색노드 2대, 데이터노드 3대로 총 5대의 서버로 구성하였다.
![](https://raw.githubusercontent.com/fastcat-co/fastcat-manuals/master/fastcatsearch/main-manual/img/328.jpg)


검색엔진설치
--------
